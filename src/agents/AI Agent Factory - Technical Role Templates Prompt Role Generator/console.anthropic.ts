import Anthropic from "@anthropic-ai/sdk";
import anthropicConfig from "./anthropic.config.json" with { type: "json" };
import categories from "./categories.json" with { type: "json" };

//import { Bun } from "bun";
import Bun from "bun";
import { readdir, mkdir } from "node:fs/promises";

const agentRole = `Full Stack Engineering`;

let agents = [];

const agentRoles = [
  "Core Engineering Domains/ðŸ›ï¸ Enterprise System Architecture",
  "Core Engineering Domains/ðŸ’» Software Engineering",
  "Core Engineering Domains/ðŸ”„ Platform Engineering",
  "Core Engineering Domains/âš¡ Performance Engineering",
  "Core Engineering Domains/ðŸ” Site Reliability Engineer",
  "Core Engineering Domains/âœ¨ Quality Engineering",
  "Core Engineering Domains/ðŸš€ Release Engineering",
  "Core Engineering Domains/ðŸ›¡ï¸ Security Engineering",
  "Core Engineering Domains/ðŸ“ˆ Data Engineering",
  "Core Engineering Domains/ðŸ§ª Test Automation Engineering",
  "Core Engineering Domains/ðŸ“¦ Package Maintenance Engineer",
  "Core Engineering Domains/ðŸ› ï¸ DevOps Engineering",
  "Core Engineering Domains/ðŸ“‰ Performance Tuning Engineering",
  "Core Engineering Domains/ðŸŒ Full Stack Engineering",
  "Core Engineering Domains/ðŸ” Search Engineering",
  "Software Development/Programming Languages/ðŸ Python Engineering",
  "Software Development/Programming Languages/ðŸ“˜ TypeScript Engineering",
  "Software Development/Programming Languages/ðŸ’› JavaScript Engineering",
  "Software Development/Programming Languages/â˜• Java Engineering",
  "Software Development/Programming Languages/ðŸ¦€ Rust Engineering",
  "Software Development/Programming Languages/âš¡ C++ Engineering",
  "Software Development/Programming Languages/ðŸŒŸ C# Engineering",
  "Software Development/Programming Languages/ðŸ¹ Go Engineering",
  "Software Development/Programming Languages/ðŸŽ Swift Engineering",
  "Software Development/Programming Languages/ðŸ–¥ï¸ C Engineering",
  "Software Development/Programming Languages/ðŸ’œ Kotlin Engineering",
  "Software Development/Programming Languages/ðŸ’Ž Ruby Engineering",
  "Software Development/Programming Languages/ðŸŸ£ Haskell Engineering",
  "Software Development/Programming Languages/ðŸ”´ Scala Engineering",
  "Software Development/Programming Languages/ðŸ’§ Elixir Engineering",
  "Software Development/Programming Languages/ðŸ“ˆ Julia Engineering",
  "Software Development/Programming Languages/ðŸ“œ Objective-C Engineering",
  "Software Development/Programming Languages/ðŸ”„ Shell Scripting Engineering",
  "Software Development/Programming Languages/ðŸ§¬ R Engineering",
  "Software Development/Programming Languages/âž• PL/SQL Engineering",
  "Software Development/Programming Languages/ðŸ’½ Assembly Engineering",
  "Software Development/Programming Languages/ðŸ“ MATLAB Engineering",
  "Software Development/Programming Languages/ðŸ“Š SAS Engineering",
  "Software Development/Programming Languages/ðŸ—ƒï¸ COBOL Engineering",
  "Software Development/Programming Languages/â²ï¸ Ada Engineering",
  "Software Development/Programming Languages/ðŸŒ² Lisp Engineering",
  "Software Development/Programming Languages/ðŸŒŒ Prolog Engineering",
  "Software Development/Programming Languages/ðŸŒ± Clojure Engineering",
  "Software Development/Programming Languages/ðŸ¢ Tcl Engineering",
  "Software Development/Programming Languages/â™¾ï¸ Erlang Engineering",
  "Software Development/Programming Languages/ðŸ§ª LabVIEW Engineering",
  "Software Development/Programming Languages/ðŸ§¬ VHDL Engineering",
  "Software Development/Programming Languages/âš—ï¸ Verilog Engineering",
  "Software Development/Web Technologies/ðŸ“± Accelerated Mobile Pages",
  "Software Development/Web Technologies/âš™ï¸ Back-End Development",
  "Software Development/Web Technologies/âš™ï¸ Backend-as-a-Service",
  "Software Development/Web Technologies/ðŸ–¥ï¸ Cloud-Native Web Development",
  "Software Development/Web Technologies/ðŸ”— Content Management Systems",
  "Software Development/Web Technologies/ðŸ“ˆ Conversion Rate Optimization",
  "Software Development/Web Technologies/ðŸŒ Cross-Browser Development",
  "Software Development/Web Technologies/ðŸ›¡ï¸ Data Privacy Management",
  "Software Development/Web Technologies/ðŸ“Š Digital Marketing",
  "Software Development/Web Technologies/ðŸ”Œ GraphQL APIs",
  "Software Development/Web Technologies/ðŸ¦¾ JavaScript Frameworks",
  "Software Development/Web Technologies/ðŸ§¬ Micro Frontends",
  "Software Development/Web Technologies/ðŸ““ RESTful API Design",
  "Software Development/Web Technologies/ðŸ“‹ SEO Optimization",
  "Software Development/Web Technologies/ðŸŒ Serverless Computing",
  "Software Development/Web Technologies/ðŸš€ Single Page Applications",
  "Software Development/Web Technologies/ðŸ›ï¸ Static Site Generators",
  "Software Development/Web Technologies/ðŸ“ˆ UX Design",
  "Software Development/Web Technologies/âŒ› Web Assembly",
  "Software Development/Web Technologies/ðŸŽ¨ Frontend Development",
  "Software Development/Web Technologies/âš¡ Web Performance",
  "Software Development/Web Technologies/ðŸ“± Progressive Web Apps",
  "Software Development/Web Technologies/ðŸ§© Web Components",
  "Software Development/Web Technologies/ðŸŒ Browser Engineering",
  "Software Development/Web Technologies/ðŸ“‹ Web Standards",
  "Software Development/Web Technologies/ðŸ”’ Web Security",
  "Software Development/Web Technologies/â™¿ Web Accessibility",
  "Software Development/Web Technologies/ðŸ“Š Web Analytics",
  "Software Development/Web Technologies/ðŸ§ª Web Testing",
  "Software Development/Frontend Specializations/âš›ï¸ React Engineering",
  "Software Development/Frontend Specializations/ðŸŽ¯ Angular Engineering",
  "Software Development/Frontend Specializations/ðŸ’š Vue Engineering",
  "Software Development/Frontend Specializations/ðŸ“± Mobile Web",
  "Software Development/Frontend Specializations/ðŸŽ¨ UI Engineering",
  "Software Development/Frontend Specializations/ðŸŽ­ Animation Engineering",
  "Software Development/Frontend Specializations/ðŸ“Š Data Visualization",
  "Software Development/Frontend Specializations/ðŸ–¼ï¸ WebGL Engineering",
  "Software Development/Frontend Specializations/ðŸŽ® Web Gaming",
  "Software Development/Frontend Specializations/ðŸ” SEO Engineering",
  "Software Development/Mobile & Cross-Platform/ðŸŽ iOS Engineering",
  "Software Development/Mobile & Cross-Platform/ðŸ¤– Android Engineering",
  "Software Development/Mobile & Cross-Platform/ðŸ”„ Cross-Platform Development",
  "Software Development/Mobile & Cross-Platform/âš¡ Mobile Performance",
  "Software Development/Mobile & Cross-Platform/ðŸ”’ Mobile Security",
  "Software Development/Mobile & Cross-Platform/ðŸ§ª Mobile Testing",
  "Software Development/Mobile & Cross-Platform/ðŸš€ Mobile DevOps",
  "Software Development/Mobile & Cross-Platform/ðŸ“Š Mobile Analytics",
  "Software Development/Mobile & Cross-Platform/ðŸŽ¨ Mobile UI/UX",
  "Software Development/Mobile & Cross-Platform/â™¿ Mobile Accessibility",
  "Infrastructure & Operations/DevOps & SRE/ðŸš€ Continuous Integration",
  "Infrastructure & Operations/DevOps & SRE/ðŸ”„ Continuous Deployment",
  "Infrastructure & Operations/DevOps & SRE/ðŸ› ï¸ Pipeline Engineering",
  "Infrastructure & Operations/DevOps & SRE/ðŸ³ Container Management",
  "Infrastructure & Operations/DevOps & SRE/â˜¸ï¸ Kubernetes Engineering",
  "Infrastructure & Operations/DevOps & SRE/ðŸ“¦ Artifact Management",
  "Infrastructure & Operations/DevOps & SRE/ðŸ”§ Configuration Management",
  "Infrastructure & Operations/DevOps & SRE/ðŸ“Š DevOps Metrics",
  "Infrastructure & Operations/DevOps & SRE/ðŸ” DevOps Security",
  "Infrastructure & Operations/DevOps & SRE/ðŸ“ˆ DevOps Analytics",
  "Infrastructure & Operations/Cloud & Infrastructure/ðŸŒ©ï¸ AWS Engineering",
  "Infrastructure & Operations/Cloud & Infrastructure/ðŸŒ¥ï¸ Azure Engineering",
  "Infrastructure & Operations/Cloud & Infrastructure/ðŸŒ GCP Engineering",
  "Infrastructure & Operations/Cloud & Infrastructure/â˜ï¸ Multi-Cloud",
  "Infrastructure & Operations/Cloud & Infrastructure/ðŸ¢ Private Cloud",
  "Infrastructure & Operations/Cloud & Infrastructure/ðŸ”„ Cloud Migration",
  "Infrastructure & Operations/Cloud & Infrastructure/ðŸ’° Cloud Cost Engineering",
  "Infrastructure & Operations/Cloud & Infrastructure/ðŸ”’ Cloud Security",
  "Infrastructure & Operations/Cloud & Infrastructure/ðŸ“Š Cloud Analytics",
  "Infrastructure & Operations/Cloud & Infrastructure/âš¡ Cloud Performance",
  "Infrastructure & Operations/Network Engineering/ðŸŒ Network Protocol",
  "Infrastructure & Operations/Network Engineering/ðŸ”„ Load Balancing",
  "Infrastructure & Operations/Network Engineering/ðŸ›¡ï¸ Network Security",
  "Infrastructure & Operations/Network Engineering/ðŸ“¡ SDN Engineering",
  "Infrastructure & Operations/Network Engineering/ðŸ”Œ Network Automation",
  "Infrastructure & Operations/Network Engineering/ðŸ“Š Network Monitoring",
  "Infrastructure & Operations/Network Engineering/ðŸŒ DNS Engineering",
  "Infrastructure & Operations/Network Engineering/ðŸ”’ VPN Engineering",
  "Infrastructure & Operations/Network Engineering/ðŸ“¡ 5G Engineering",
  "Infrastructure & Operations/Network Engineering/ðŸŒ CDN Engineering",
  "Infrastructure & Operations/Build & Package Management/ðŸ“¦ Package Management",
  "Infrastructure & Operations/Build & Package Management/ðŸ—ï¸ Build Systems",
  "Infrastructure & Operations/Build & Package Management/ðŸŽ¯ Dependency Management",
  "Infrastructure & Operations/Build & Package Management/ðŸ”„ Version Control",
  "Infrastructure & Operations/Build & Package Management/ðŸ“‹ Release Management",
  "Infrastructure & Operations/Build & Package Management/ðŸ­ Artifact Management",
  "Infrastructure & Operations/Build & Package Management/ðŸ“š Module Systems",
  "Infrastructure & Operations/Build & Package Management/ðŸ” Code Generation",
  "Infrastructure & Operations/Build & Package Management/âš¡ Build Optimization",
  "Infrastructure & Operations/Build & Package Management/ðŸ”’ Build Security",
  "Security & Privacy/Security Engineering/ðŸ›¡ï¸ Security Engineering",
  "Security & Privacy/Security Engineering/ðŸ” Application Security",
  "Security & Privacy/Security Engineering/ðŸ° Infrastructure Security",
  "Security & Privacy/Security Engineering/â˜ï¸ Cloud Security",
  "Security & Privacy/Security Engineering/ðŸ“œ Compliance Engineering",
  "Security & Privacy/Security Engineering/ðŸ•¶ï¸ Privacy Engineering",
  "Security & Privacy/Security Engineering/ðŸ” Cryptography Engineering",
  "Security & Privacy/Security Engineering/ðŸš¨ Security Operations",
  "Security & Privacy/Security Engineering/ðŸŽ¯ Threat Modeling",
  "Security & Privacy/Cryptography/ðŸ”’ Encryption Systems",
  "Security & Privacy/Cryptography/ðŸ”‘ PKI Engineering",
  "Security & Privacy/Cryptography/ðŸ›¡ï¸ Security Protocols",
  "Security & Privacy/Cryptography/ðŸ” Zero Trust Architecture",
  "Security & Privacy/Cryptography/ðŸ” Security Analytics",
  "Security & Privacy/Cryptography/ðŸš¨ Threat Detection",
  "Security & Privacy/Cryptography/ðŸ›¡ï¸ WAF Engineering",
  "Security & Privacy/Cryptography/ðŸ”’ Secrets Management",
  "Security & Privacy/Cryptography/ðŸ” HSM Engineering",
  "Security & Privacy/Cryptography/ðŸ›¡ï¸ DLP Engineering",
  "Security & Privacy/Identity & Access Management/ðŸ”‘ Authentication Systems",
  "Security & Privacy/Identity & Access Management/ðŸŽ« Authorization Systems",
  "Security & Privacy/Identity & Access Management/ðŸ”’ SSO Implementation",
  "Security & Privacy/Identity & Access Management/ðŸŽ­ Identity Federation",
  "Security & Privacy/Identity & Access Management/ðŸ” OAuth/OIDC",
  "Security & Privacy/Identity & Access Management/ðŸ“± MFA Systems",
  "Security & Privacy/Identity & Access Management/ðŸ—ï¸ Key Management",
  "Security & Privacy/Identity & Access Management/ðŸ‘¤ User Management",
  "Security & Privacy/Identity & Access Management/ðŸ” Access Analytics",
  "Security & Privacy/Identity & Access Management/ðŸ“‹ Compliance Systems",
  "Data & Analytics/Data Engineering/ðŸ’¾ Data Engineering",
  "Data & Analytics/Data Engineering/ðŸ§® Data Science Engineering",
  "Data & Analytics/Data Engineering/ðŸ“ˆ Analytics Engineering",
  "Data & Analytics/Data Engineering/ðŸ—ï¸ Data Platform Engineering",
  "Data & Analytics/Data Engineering/ðŸ”„ ETL Engineering",
  "Data & Analytics/Data Engineering/ðŸ¢ Data Warehouse Engineering",
  "Data & Analytics/Data Engineering/ðŸ“Š Business Intelligence",
  "Data & Analytics/Data Engineering/ðŸ“‰ Data Visualization",
  "Data & Analytics/Data Engineering/ðŸŒŠ Stream Processing",
  "Data & Analytics/Analytics Engineering/ðŸ“ˆ Product Analytics",
  "Data & Analytics/Analytics Engineering/ðŸ” Search Analytics",
  "Data & Analytics/Analytics Engineering/ðŸ‘¤ User Analytics",
  "Data & Analytics/Analytics Engineering/ðŸ’° Revenue Analytics",
  "Data & Analytics/Analytics Engineering/ðŸ·ï¸ Marketing Analytics",
  "Data & Analytics/Analytics Engineering/ðŸ”’ Security Analytics",
  "Data & Analytics/Analytics Engineering/ðŸ“± Mobile Analytics",
  "Data & Analytics/Analytics Engineering/ðŸŒ Web Analytics",
  "Data & Analytics/Analytics Engineering/ðŸ“Š Real-time Analytics",
  "Data & Analytics/Analytics Engineering/ðŸ¤– Predictive Analytics",
  "Data & Analytics/Database Engineering/ðŸ’¾ SQL Engineering",
  "Data & Analytics/Database Engineering/ðŸ”„ NoSQL Engineering",
  "Data & Analytics/Database Engineering/ðŸ“Š Time Series DB",
  "Data & Analytics/Database Engineering/ðŸ” Search Engineering",
  "Data & Analytics/Database Engineering/ðŸ—ƒï¸ Graph Databases",
  "Data & Analytics/Database Engineering/ðŸš€ In-Memory DB",
  "Data & Analytics/Database Engineering/ðŸ“ˆ Database Performance",
  "Data & Analytics/Database Engineering/ðŸ”’ Database Security",
  "Data & Analytics/Database Engineering/ðŸ”„ Database Replication",
  "Data & Analytics/Database Engineering/ðŸ’¾ Data Migration",
  "Quality & Testing/ðŸ” Test Engineering",
  "Quality & Testing/ðŸ¤– Test Automation",
  "Quality & Testing/âš¡ Performance Testing",
  "Quality & Testing/ðŸ›¡ï¸ Security Testing",
  "Quality & Testing/ðŸ‹ï¸ Load Testing",
  "Quality & Testing/ðŸ”„ Integration Testing",
  "Quality & Testing/ðŸŽ¯ E2E Testing",
  "Quality & Testing/ðŸ”Œ API Testing",
  "Quality & Testing/ðŸ“± Mobile Testing",
  "Quality & Testing/â™¿ Accessibility Testing",
  "Architecture & Design/Architecture Domains/â˜ï¸ Cloud Architecture",
  "Architecture & Design/Architecture Domains/ðŸ”„ Microservices Architecture",
  "Architecture & Design/Architecture Domains/âš¡ Serverless Architecture",
  "Architecture & Design/Architecture Domains/ðŸŒŠ Event-Driven Architecture",
  "Architecture & Design/Architecture Domains/ðŸŽ¯ Domain-Driven Design",
  "Architecture & Design/Architecture Domains/ðŸ”Œ API Architecture",
  "Architecture & Design/Architecture Domains/ðŸ’¾ Data Architecture",
  "Architecture & Design/Architecture Domains/ðŸ›¡ï¸ Security Architecture",
  "Architecture & Design/Architecture Domains/ðŸ”„ Integration Architecture",
  "Architecture & Design/Architecture Domains/ðŸ“± Mobile Architecture",
  "Architecture & Design/Architecture Domains/ðŸŽ¨ Frontend Architecture",
  "Architecture & Design/Architecture Domains/âš™ï¸ Backend Architecture",
  "Architecture & Design/API & Integration/ðŸ”Œ API Design",
  "Architecture & Design/API & Integration/ðŸ”„ API Gateway",
  "Architecture & Design/API & Integration/ðŸ“¡ GraphQL Engineering",
  "Architecture & Design/API & Integration/ðŸš€ REST API",
  "Architecture & Design/API & Integration/ðŸ“¨ Message Queues",
  "Architecture & Design/API & Integration/ðŸ”„ Event Streaming",
  "Architecture & Design/API & Integration/ðŸ”— Service Mesh",
  "Architecture & Design/API & Integration/ðŸ¤ API Integration",
  "Architecture & Design/API & Integration/ðŸ“Š API Analytics",
  "Architecture & Design/API & Integration/ðŸ”’ API Security",
  "Performance & Observability/Performance Engineering/âš¡ Load Optimization",
  "Performance & Observability/Performance Engineering/ðŸ”„ Caching Systems",
  "Performance & Observability/Performance Engineering/ðŸŒ CDN Engineering",
  "Performance & Observability/Performance Engineering/ðŸ“Š Performance Analytics",
  "Performance & Observability/Performance Engineering/ðŸ” Performance Profiling",
  "Performance & Observability/Performance Engineering/ðŸŽ¯ Resource Optimization",
  "Performance & Observability/Performance Engineering/ðŸ“ˆ Scalability Engineering",
  "Performance & Observability/Performance Engineering/ðŸ”§ Performance Tuning",
  "Performance & Observability/Performance Engineering/ðŸŽï¸ Speed Optimization",
  "Performance & Observability/Performance Engineering/ðŸ“± Mobile Performance",
  "Performance & Observability/Observability & Monitoring/ðŸ“ˆ Metrics Engineering",
  "Performance & Observability/Observability & Monitoring/ðŸ“ Logging Systems",
  "Performance & Observability/Observability & Monitoring/ðŸ” Tracing Systems",
  "Performance & Observability/Observability & Monitoring/ðŸŽ¯ APM Solutions",
  "Performance & Observability/Observability & Monitoring/ðŸš¨ Alerting Systems",
  "Performance & Observability/Observability & Monitoring/ðŸ“Š Visualization Systems",
  "Performance & Observability/Observability & Monitoring/ðŸ” Debug Engineering",
  "Performance & Observability/Observability & Monitoring/ðŸ“ˆ Performance Monitoring",
  "Performance & Observability/Observability & Monitoring/ðŸ›¡ï¸ Security Monitoring",
  "Performance & Observability/Observability & Monitoring/ðŸ’° Cost Monitoring",
  "Emerging Technologies/AI & Machine Learning/ðŸ§  AI Engineering",
  "Emerging Technologies/AI & Machine Learning/ðŸ”¬ ML Engineering",
  "Emerging Technologies/AI & Machine Learning/ðŸš€ MLOps Engineering",
  "Emerging Technologies/AI & Machine Learning/ðŸ’¬ NLP Engineering",
  "Emerging Technologies/AI & Machine Learning/ðŸ‘ï¸ Computer Vision",
  "Emerging Technologies/AI & Machine Learning/ðŸ§® Deep Learning",
  "Emerging Technologies/AI & Machine Learning/ðŸŽ® Reinforcement Learning",
  "Emerging Technologies/AI & Machine Learning/ðŸ—ï¸ AI Infrastructure",
  "Emerging Technologies/AI & Machine Learning/ðŸ›¡ï¸ AI Security",
  "Emerging Technologies/AI & Machine Learning/âš–ï¸ AI Ethics",
  "Emerging Technologies/Specialized Domains/â›“ï¸ Blockchain Engineering",
  "Emerging Technologies/Specialized Domains/ðŸ”Œ IoT Engineering",
  "Emerging Technologies/Specialized Domains/ðŸ“¡ Edge Computing",
  "Emerging Technologies/Specialized Domains/ðŸŽ® Gaming Engineering",
  "Emerging Technologies/Specialized Domains/ðŸ¥½ AR/VR Engineering",
  "Emerging Technologies/Specialized Domains/ðŸ”® Quantum Computing",
  "Emerging Technologies/Specialized Domains/ðŸ”§ Embedded Systems",
  "Emerging Technologies/Specialized Domains/âš¡ Real-Time Systems",
  "Emerging Technologies/Specialized Domains/ðŸŽµ Audio Engineering",
  "Emerging Technologies/Specialized Domains/ðŸŽ¥ Video Engineering",
  "Automation & Tooling/ðŸ”„ Process Automation",
  "Automation & Tooling/ðŸ¤– RPA Engineering",
  "Automation & Tooling/ðŸ”§ Tool Automation",
  "Automation & Tooling/ðŸ“Š Test Automation",
  "Automation & Tooling/ðŸ”„ Workflow Automation",
  "Automation & Tooling/ðŸ¤– Bot Development",
  "Automation & Tooling/ðŸ“ˆ Analytics Automation",
  "Automation & Tooling/ðŸ”’ Security Automation",
  "Automation & Tooling/ðŸ“ Documentation Automation",
  "Automation & Tooling/ðŸ”„ Infrastructure Automation",
];

const anthropic = new Anthropic({
  // defaults to process.env["ANTHROPIC_API_KEY"]
  apiKey: process.env["ANTHROPIC_API_KEY"],
});

const responses = agentRoles.map(async (agentRole) => {
  // Create directory if it doesn't exist
  const dir = `../${agentRole}`;
  console.log(`Creating ${dir}`);

  // Add message to config
  const config = {
    ...anthropicConfig,
    messages: [
      ...anthropicConfig.messages,
      {
        role: "user",
        content: [
          {
            type: "text",
            text: `Create an agent for: ${agentRole}`,
          },
        ],
      },
    ],
  };
  //console.log(JSON.stringify(anthropicConfig));

  // Replace placeholders like {{AGENT_NAME}} with real values,
  // because the SDK does not support variables.
  const msg = await anthropic.messages.create(config);

  anthropicConfig.messages.push(msg);

  await Bun.write(`anthropic.config2.json`, JSON.stringify(anthropicConfig));

  const roles = msg.content
    .filter((content) => content.type === "text")
    .map((content) => content.text)
    .join("\n");

  // Write the README file
  await Bun.write(`${dir}/readme.md`, roles, {
    createDirs: false,
  });

  return msg;
});

await Promise.all(responses);
